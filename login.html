---
layout: default
title: Perfil
---

<section class="container my-5">
  <h1 class="mb-4 text-center" style="color: var(--verde-escuro);">O Meu Perfil</h1>

  <div id="userInfo" class="text-center" style="display:none;">
    <img id="userPhoto" src="" alt="Foto de Perfil" class="rounded-circle mb-3" width="120">
    <h3 id="userName"></h3>
    <p id="userEmail"></p>
    <button id="logoutBtn" class="btn btn-danger">Sair</button>
  </div>

  <div id="noUser" class="text-center" style="display:none;">
    <p>Não estás autenticado. <a href="login.html">Faz login aqui</a>.</p>
  </div>
</section>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
  import { getAuth, onAuthStateChanged, signOut } 
    from "https://www.gstatic.com/firebasejs/11.0.1/firebase-auth.js";

  const firebaseConfig = {
    apiKey: "API_KEY_AQUI",
    authDomain: "PROJECT_ID.firebaseapp.com",
    projectId: "PROJECT_ID",
    storageBucket: "PROJECT_ID.appspot.com",
    messagingSenderId: "SENDER_ID",
    appId: "APP_ID"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);

  const userInfoDiv = document.getElementById("userInfo");
  const noUserDiv = document.getElementById("noUser");

  const userPhoto = document.getElementById("userPhoto");
  const userName = document.getElementById("userName");
  const userEmail = document.getElementById("userEmail");

  // Verifica se o utilizador está logado
  onAuthStateChanged(auth, (user) => {
    if (user) {
      // Mostra info do utilizador
      userInfoDiv.style.display = "block";
      noUserDiv.style.display = "none";

      userPhoto.src = user.photoURL || "https://via.placeholder.com/120";
      userName.textContent = user.displayName || "Utilizador sem nome";
      userEmail.textContent = user.email;
    } else {
      // Não está logado
      userInfoDiv.style.display = "none";
      noUserDiv.style.display = "block";
    }
  });

  // Logout
  document.getElementById("logoutBtn").addEventListener("click", async () => {
    await signOut(auth);
    alert("Terminaste a sessão.");
    window.location.href = "login.html";
  });
</script>
