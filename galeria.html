---
layout: default
title: Galeria
---

<section class="container my-5" id="galeria">
    <h1 class="mb-4 text-center" style="color: var(--verde-escuro);">Galeria</h1>
    <div class="row g-4">
        {% assign fotos = site.static_files | where_exp:"file","file.path contains '/assets/img/galeria/'" | reverse %}
        {% for foto in fotos %}
        <div class="col-sm-6 col-md-4">
            <img src="{{ foto.path }}" class="img-fluid rounded shadow galeria-img" alt="Galeria {{ forloop.index }}"
                 onclick="openLightbox({{ forloop.index0 }})">
        </div>
        {% endfor %}
    </div>
</section>

<!-- Modal Lightbox -->
<div class="modal fade" id="lightboxModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-xl">
        <div class="modal-content bg-transparent border-0">
            <div class="modal-body p-0 position-relative">
                <button type="button" class="btn-close btn-close-white position-absolute top-0 end-0 m-2" data-bs-dismiss="modal" aria-label="Close"></button>
                <img id="lightboxImage" src="" class="img-fluid rounded" alt="Imagem Ampliada">
                <button class="position-absolute top-50 start-0 translate-middle-y btn btn-success btn-sm" onclick="prevImage()">&#10094;</button>
                <button class="position-absolute top-50 end-0 translate-middle-y btn btn-success btn-sm" onclick="nextImage()">&#10095;</button>
            </div>
        </div>
    </div>
</div>


<script>
    let currentIndex = 0;
    const images = Array.from(document.querySelectorAll('.galeria-img')).map(img => img.src);

    function openLightbox(index) {
        currentIndex = index;
        document.getElementById('lightboxImage').src = images[currentIndex];
        new bootstrap.Modal(document.getElementById('lightboxModal')).show();
    }

    function prevImage() {
        currentIndex = (currentIndex - 1 + images.length) % images.length;
        document.getElementById('lightboxImage').src = images[currentIndex];
    }

    function nextImage() {
        currentIndex = (currentIndex + 1) % images.length;
        document.getElementById('lightboxImage').src = images[currentIndex];
    }

    // 🔹 Navegação por teclado
    document.addEventListener('keydown', function (event) {
        if (document.getElementById('lightboxModal').classList.contains('show')) {
            if (event.key === "ArrowLeft") {
                prevImage();
            } else if (event.key === "ArrowRight") {
                nextImage();
            } else if (event.key === "Escape") {
                bootstrap.Modal.getInstance(document.getElementById('lightboxModal')).hide();
            }
        }
    });

    // 🔹 Swipe em mobile
    let touchStartX = 0;
    let touchEndX = 0;
    const lightbox = document.getElementById('lightboxModal');

    lightbox.addEventListener('touchstart', e => {
        touchStartX = e.changedTouches[0].screenX;
    }, false);

    lightbox.addEventListener('touchend', e => {
        touchEndX = e.changedTouches[0].screenX;
        handleSwipe();
    }, false);

    function handleSwipe() {
        const swipeThreshold = 50; // px mínimos
        if (touchEndX < touchStartX - swipeThreshold) {
            nextImage(); // swipe esquerda → próxima
        }
        if (touchEndX > touchStartX + swipeThreshold) {
            prevImage(); // swipe direita → anterior
        }
    }
</script>
